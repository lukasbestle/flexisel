/* Flexisel v0.9 (13.01.2014) | (c) Lukas Bestle */
var Flexisel=function(d,e){var m=this,f,h,g,n,c,k,l;this.options={interval:8E3,waitAfterManual:2E4,changeTime:400,stage:".stage",listItems:"li",buttons:"li a",stageChangingClass:"changing",activeClass:"active",setCallback:null,debug:!1};if("object"===typeof e)for(f in e)e.hasOwnProperty(f)&&(this.options[f]=e[f]);g=d.querySelector(this.options.stage);n=Array.prototype.slice.call(d.querySelectorAll(this.options.listItems));c=Array.prototype.slice.call(d.querySelectorAll(this.options.buttons));this.lastManual=
this.current=0;this.hovered=!1;this.set=function(a){var b=void 0===a?c[this.current===c.length-1?0:this.current+1]:a;if("function"===typeof this.options.setCallback&&!this.options.setCallback(a)||c.indexOf(b)===this.current)return!1;n.forEach(function(a){l(a,this.options.activeClass)}.bind(this));k(b.parentNode,this.options.activeClass);k(g,this.options.stageChangingClass);setTimeout(function(){g.innerHTML=function(a){var b;(b=a.outerHTML)||(b=document.createElement("div"),b.appendChild(a.cloneNode(!0)),
b=b.innerHTML);return b}(b);setTimeout(function(){l(g,this.options.stageChangingClass)}.bind(this),this.options.changeTime/2)}.bind(this),this.options.changeTime/2);this.current=c.indexOf(b);this.options.debug&&console.log("[Flexisel] Changed to item "+this.current+", which was "+(void 0===a?"the next item":"requested")+".");return!0};h=function(){var a=(new Date).getTime(),a=this.lastManual+this.options.waitAfterManual>a?this.options.waitAfterManual-(a-this.lastManual):0;setTimeout(function(){this.lastManual+
this.options.waitAfterManual<=(new Date).getTime()&&!this.hovered&&this.set();setTimeout(h.bind(this),this.options.interval)}.bind(this),a)};setTimeout(h.bind(this),this.options.interval);c.forEach(function(a){a.onclick=function(){if(m.set(this))return m.lastManual=(new Date).getTime(),!1}}.bind(this));d.onmouseover=function(){this.hovered=!0}.bind(this);d.onmouseout=function(){this.hovered=!1}.bind(this);k=function(a,b){a.className+=(a.className?" ":"")+b};l=function(a,b){a.className=a.className.replace(RegExp("(\\s|^)"+
b+"(\\s|$)")," ").replace(/^\s+|\s+$/g,"")}};
